@(tweets: List[Tweet], topic: String)

@scripts = {
    <script src="@routes.Assets.at("javascripts/map.js")" type="text/javascript"></script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDN5oYZL5dP2djoGvYLJRTMfVgDNgw93Ew&callback=initMap">
    </script>
}

@main(scripts) {

    @for(tweet <- tweets) {
        <span class="tweet" data-lat="@tweet.getGeoLocation().getLatitude"
        data-lng="@tweet.getGeoLocation().getLongitude" data-text="@tweet.getText"
        data-sentiment="@tweet.getSentimentValue"></span>
    }


    <div id="map-container">
        <ul id="map-toolbar">
            <li><a href="@routes.MapController.visualiseTopic()" id="new-topic-link"
            onclick="return renderNewTopicSearchForm()">Search for a new topic</a></li>
            <li><a href="@routes.StatsController.visualiseTopic()?topic=@topic">Detailed statistical breakdown</a></li>


            <form id="hidden-new-topic-search" method="GET" action="@routes.MapController.visualiseTopic()">
                <span onclick="return hideNewTopicSearchForm()">x</span>
                <input type="text" name="topic"/>
                <input type="submit" />
            </form>
        </ul>

        <div id="map"></div>

        <div id="legend"><h3>Legend</h3></div>
    </div>
}